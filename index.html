<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Movie DB</title>
  <script type="text/javascript" src="./elm.js"></script>
  <link rel="stylesheet" href="./style.css">
  <style>body { padding: 0; margin: 0; }</style>
</head>

<body>

<div id="elm-content"></div>

<script type="text/javascript">
    var getFromLocalStorage = function (name, defaultValue) {
      if (localStorage && localStorage.getItem) {
        return localStorage.getItem(name) || defaultValue || '';
      }

      return defaultValue || '';
    };

    var saveToLocalStorage = function (name, value) {
      if (localStorage && localStorage.setItem) {
        localStorage.setItem(name, value);
      }
    };

    var app = Elm.Main.init({
      node: document.getElementById('elm-content'),
      flags: getFromLocalStorage('query')
    });

    app.ports.storeQuery.subscribe(function (query) {
      saveToLocalStorage('query', query);
    });
</script>

</body>
</html>